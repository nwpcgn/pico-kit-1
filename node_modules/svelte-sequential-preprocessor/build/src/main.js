"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const compiler_1 = require("svelte/compiler");
exports.default = exports = module.exports = function (preprocessors) {
    return {
        async markup({ content, filename }) {
            var _a, _b, _c;
            const dependencies = [];
            let code = content;
            let map;
            let attributes;
            let toString;
            for (const pp of preprocessors) {
                const processed = await (0, compiler_1.preprocess)(code, pp, { filename });
                if (processed && processed.dependencies) {
                    dependencies.push(...processed.dependencies);
                }
                code = processed ? processed.code : code;
                map = (_a = processed.map) !== null && _a !== void 0 ? _a : map;
                attributes = (_b = processed.attributes) !== null && _b !== void 0 ? _b : attributes;
                toString = (_c = processed.toString) !== null && _c !== void 0 ? _c : toString;
            }
            return {
                code,
                dependencies,
                map,
                attributes,
                toString,
            };
        }
    };
};
//# sourceMappingURL=main.js.map